#Install version reading task https://marketplace.visualstudio.com/items?itemName=OneLuckiDev.json2variable

parameters:
- name: versionFile
  type: string
  default: ''

steps:
  - task: oneLuckiDevJson2Variable@1
    displayName: 'Read version information'
    inputs:
      jsonFile: '${{ parameters.versionFile }}'
      shouldPrefixVariables: true
      variablePrefix: 'Version'

  - script: |
      set +x |
      echo "##vso[task.setvariable variable=previewVersion]$(Version.Major).$(Version.Minor).$(Build.BuildId).$(Version.Revision)3"